{"version":3,"sources":["interfaces/track.js"],"names":["TrackInterface","items","params","item","i","Array","isArray","length","Error","track","artist","timestamp","Object","keys","forEach","key","http","post","authenticated","then","body","scrobbles","nowplaying"],"mappings":"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","file":"interfaces/track.js","sourcesContent":["import {isDefined} from '../core/helpers';\r\nimport Interface from './base';\r\n\r\nexport default class TrackInterface extends Interface {\r\n    scrobble(items) {\r\n        var params = {};\r\n        var item;\r\n        var i;\r\n\r\n        if(!isDefined(items) || !Array.isArray(items) || items.length < 1) {\r\n            throw new Error('Invalid value provided for the \"items\" parameter');\r\n        }\r\n\r\n        if(items.length > 50) {\r\n            throw new Error('Exceeded scrobble batch limit, only 50 scrobbles can be sent in a single batch');\r\n        }\r\n\r\n        // Build parameters\r\n        for(i = 0; i < items.length; ++i) {\r\n            item = items[i];\r\n\r\n            // Ensure required parameters have been defined\r\n            if(!isDefined(item.track)) {\r\n                throw new Error('Missing required \"track\" parameter in item #' + i);\r\n            }\r\n\r\n            if(!isDefined(item.artist)) {\r\n                throw new Error('Missing required \"artist\" parameter in item #' + i);\r\n            }\r\n\r\n            if(!isDefined(item.timestamp)) {\r\n                throw new Error('Missing required \"timestamp\" parameter in item #' + i);\r\n            }\r\n\r\n            // Add parameters for each item property\r\n            Object.keys(item).forEach((key) => {\r\n                if(!isDefined(item[key])) {\r\n                    return;\r\n                }\r\n\r\n                params[key + '[' + i + ']'] = item[key];\r\n            });\r\n        }\r\n\r\n        // Send request\r\n        return this.http.post('track.scrobble', {\r\n            params: params,\r\n\r\n            authenticated: true\r\n        }).then(function(body) {\r\n            if(isDefined(body) && isDefined(body.scrobbles)) {\r\n                return body.scrobbles;\r\n            }\r\n\r\n            return null;\r\n        });\r\n    }\r\n\r\n    updateNowPlaying(track, artist, params) {\r\n        if(!isDefined(track)) {\r\n            throw new Error('Invalid value provided for the \"track\" parameter');\r\n        }\r\n\r\n        if(!isDefined(artist)) {\r\n            throw new Error('Invalid value provided for the \"artist\" parameter');\r\n        }\r\n\r\n        // Build parameters\r\n        params = isDefined(params) ? params : {};\r\n        params.track = track;\r\n        params.artist = artist;\r\n\r\n        // Send request\r\n        return this.http.post('track.updateNowPlaying', {\r\n            params: params,\r\n\r\n            authenticated: true\r\n        }).then(function(body) {\r\n            if(isDefined(body) && isDefined(body.nowplaying)) {\r\n                return body.nowplaying;\r\n            }\r\n\r\n            return null;\r\n        });\r\n    }\r\n\r\n    love(track, artist) {\r\n        if(!isDefined(track)) {\r\n            throw new Error('Invalid value provided for the \"track\" parameter');\r\n        }\r\n\r\n        if(!isDefined(artist)) {\r\n            throw new Error('Invalid value provided for the \"artist\" parameter');\r\n        }\r\n\r\n        throw new Error('Not Implemented');\r\n    }\r\n\r\n    unlove(track, artist) {\r\n        if(!isDefined(track)) {\r\n            throw new Error('Invalid value provided for the \"track\" parameter');\r\n        }\r\n\r\n        if(!isDefined(artist)) {\r\n            throw new Error('Invalid value provided for the \"artist\" parameter');\r\n        }\r\n\r\n        throw new Error('Not Implemented');\r\n    }\r\n}\r\n"],"sourceRoot":"/source/"}