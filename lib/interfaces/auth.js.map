{"version":3,"sources":["interfaces/auth.js"],"names":["AuthInterface","options","params","_client","key","callbackUrl","token","encode","username","password","Error","http","get","signed","then","body","session"],"mappings":";;;;;;;;AAAA;;AACA;;;;AAEA;;;;;;;;;;;;IAEqBA,a;;;;;;;;;;;wCACDC,O,EAAS;AACrB,gBAAIC,SAAS,EAAb;;AAEAD,sBAAU,wBAAUA,OAAV,IAAqBA,OAArB,GAA+B,EAAzC;;AAEA;AACAC,mBAAO,SAAP,IAAoB,KAAKC,OAAL,CAAaC,GAAjC;;AAEA,gBAAG,wBAAUH,QAAQI,WAAlB,CAAH,EAAmC;AAC/BH,uBAAO,IAAP,IAAeD,QAAQI,WAAvB;AACH;;AAED,gBAAG,wBAAUJ,QAAQK,KAAlB,CAAH,EAA6B;AACzBJ,uBAAO,OAAP,IAAkBD,QAAQK,KAA1B;AACH;;AAED;AACA,mBAAO,mCAAmC,sBAAYC,MAAZ,CAAmBL,MAAnB,CAA1C;AACH;;;yCAEgBM,Q,EAAUC,Q,EAAU;AACjC,gBAAG,CAAC,wBAAUD,QAAV,CAAJ,EAAyB;AACrB,sBAAM,IAAIE,KAAJ,CAAU,qDAAV,CAAN;AACH;;AAED,gBAAG,CAAC,wBAAUD,QAAV,CAAJ,EAAyB;AACrB,sBAAM,IAAIC,KAAJ,CAAU,qDAAV,CAAN;AACH;;AAED,mBAAO,KAAKC,IAAL,CAAUC,GAAV,CAAc,uBAAd,EAAuC;AAC1CV,wBAAQ;AACJM,8BAAUA,QADN;AAEJC,8BAAUA;AAFN,iBADkC;;AAM1CI,wBAAQ;AANkC,aAAvC,EAOJC,IAPI,CAOC,UAASC,IAAT,EAAe;AACnB,oBAAG,wBAAUA,IAAV,KAAmB,wBAAUA,KAAKC,OAAf,CAAtB,EAA+C;AAC3C,2BAAOD,KAAKC,OAAZ;AACH;;AAED,uBAAO,IAAP;AACH,aAbM,CAAP;AAcH;;;mCAEUV,K,EAAO;AACd,gBAAG,CAAC,wBAAUA,KAAV,CAAJ,EAAsB;AAClB,sBAAM,IAAII,KAAJ,CAAU,kDAAV,CAAN;AACH;;AAED,mBAAO,KAAKC,IAAL,CAAUC,GAAV,CAAc,iBAAd,EAAiC;AACpCV,wBAAQ;AACJI,2BAAOA;AADH,iBAD4B;;AAKpCO,wBAAQ;AAL4B,aAAjC,EAMJC,IANI,CAMC,UAASC,IAAT,EAAe;AACnB,oBAAG,wBAAUA,IAAV,KAAmB,wBAAUA,KAAKC,OAAf,CAAtB,EAA+C;AAC3C,2BAAOD,KAAKC,OAAZ;AACH;;AAED,uBAAO,IAAP;AACH,aAZM,CAAP;AAaH;;;mCAEU;AACP,mBAAO,KAAKL,IAAL,CAAUC,GAAV,CAAc,eAAd,EAA+B;AAClCC,wBAAQ;AAD0B,aAA/B,EAEJC,IAFI,CAEC,UAASC,IAAT,EAAe;AACnB,oBAAG,wBAAUA,IAAV,KAAmB,wBAAUA,KAAKT,KAAf,CAAtB,EAA6C;AACzC,2BAAOS,KAAKT,KAAZ;AACH;;AAED,uBAAO,IAAP;AACH,aARM,CAAP;AASH;;;;;;kBA5EgBN,a","file":"interfaces/auth.js","sourcesContent":["import {isDefined} from '../core/helpers';\r\nimport Interface from './base';\r\n\r\nimport querystring from 'querystring';\r\n\r\nexport default class AuthInterface extends Interface {\r\n    getAuthorizeUrl(options) {\r\n        var params = {};\r\n\r\n        options = isDefined(options) ? options : {};\r\n\r\n        // Set parameters\r\n        params['api_key'] = this._client.key;\r\n\r\n        if(isDefined(options.callbackUrl)) {\r\n            params['cb'] = options.callbackUrl;\r\n        }\r\n\r\n        if(isDefined(options.token)) {\r\n            params['token'] = options.token;\r\n        }\r\n\r\n        // Build URL\r\n        return 'https://www.last.fm/api/auth/?' + querystring.encode(params);\r\n    }\r\n\r\n    getMobileSession(username, password) {\r\n        if(!isDefined(username)) {\r\n            throw new Error('Invalid value provided for the \"username\" parameter');\r\n        }\r\n\r\n        if(!isDefined(password)) {\r\n            throw new Error('Invalid value provided for the \"password\" parameter');\r\n        }\r\n\r\n        return this.http.get('auth.getMobileSession', {\r\n            params: {\r\n                username: username,\r\n                password: password\r\n            },\r\n\r\n            signed: true\r\n        }).then(function(body) {\r\n            if(isDefined(body) && isDefined(body.session)) {\r\n                return body.session;\r\n            }\r\n\r\n            return null;\r\n        });\r\n    }\r\n\r\n    getSession(token) {\r\n        if(!isDefined(token)) {\r\n            throw new Error('Invalid value provided for the \"token\" parameter');\r\n        }\r\n\r\n        return this.http.get('auth.getSession', {\r\n            params: {\r\n                token: token\r\n            },\r\n\r\n            signed: true\r\n        }).then(function(body) {\r\n            if(isDefined(body) && isDefined(body.session)) {\r\n                return body.session;\r\n            }\r\n\r\n            return null;\r\n        });\r\n    }\r\n\r\n    getToken() {\r\n        return this.http.get('auth.getToken', {\r\n            signed: true\r\n        }).then(function(body) {\r\n            if(isDefined(body) && isDefined(body.token)) {\r\n                return body.token;\r\n            }\r\n\r\n            return null;\r\n        });\r\n    }\r\n}\r\n"],"sourceRoot":"/source/"}